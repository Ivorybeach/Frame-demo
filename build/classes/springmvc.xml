<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:mvc="http://www.springframework.org/schema/mvc"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

	<!-- springMVC的配置文件 -->

	<!-- 注解驱动,加入注解驱动后，会自动初始化许多类，如用于消息转换的HttpMessageConvert的实现类等等等，具体可查看书签中博客。
	在此加入配置的日期转换器StringToDateConvert -->
	<mvc:annotation-driven conversion-service="conversionService"/>
	
	<!-- 日期转换器bean -->
	<bean id="conversionService" class="org.springframework.context.support.ConversionServiceFactoryBean">
			<property name="converters">
				<list>
					<!-- 日期转换器
					<bean class="com.test.util.StringToDateConverter"></bean> -->
					<!-- 还可以加入多个自定义的转换器.... -->
				</list>
			</property>
	</bean>
	
	<!-- 定义扫描装载的包 -->
	<context:component-scan base-package="com.test.*"></context:component-scan>
	
	<!-- 视图解析器，
	InternalResourceViewResolver是一个JSP视图解析器，还有专门用于解析其他类型视图的视图解析器 -->
	<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
		<property name="prefix" value="/WEB-INF/jsp/"></property>
		<property name="suffix" value=".jsp"></property>
	</bean>
	
	<!-- 配置拦截器 -->
	<mvc:interceptors>
		<!-- role拦截器 -->
		<mvc:interceptor>
			<mvc:mapping path="/param/commonParam.do"/>
			<bean class="com.test.interceptor.RoleInterceptor"></bean>
		</mvc:interceptor>
		<!-- 国际化的拦截器 -->
		<mvc:interceptor>
			<mvc:mapping path="/message/*.do"/>
			<bean class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
				<!-- 监控请求参数language,用于判断locale，默认参数名是locale，这里改成language，对用户较友好 -->
				<property name="paramName" value="language"></property>
			</bean>
		</mvc:interceptor>
	</mvc:interceptors>
	
	<!-- 文件上传 -->
	<bean id="multipartResolver"
		class="org.springframework.web.multipart.support.StandardServletMultipartResolver">
	</bean>
	
	<!-- messageSource，springmvc的消息接口，用来加载*.properties -->
	<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
		<property name="defaultEncoding" value="UTF-8"></property>
		<property name="basenames" value="classpath:msg"></property>
		<!-- 重加载.properties时间，即一小时扫描一次 -->
		<property name="CacheSeconds" value="3600"></property>
	</bean>
	
	<!-- localeResolver国际化解析器，这里是session解析器 -->
	<bean id="localeResolver" class="org.springframework.web.servlet.i18n.SessionLocaleResolver">
		<property name="defaultLocale" value="zh_CN"></property>
	</bean>
</beans>        
